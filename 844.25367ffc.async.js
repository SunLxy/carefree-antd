(self.webpackChunkcarefree_antd_root=self.webpackChunkcarefree_antd_root||[]).push([[844,729],{42478:function(je,I,t){"use strict";t.r(I),t.d(I,{default:function(){return ce}});var X=t(15009),U=t.n(X),Y=t(9783),y=t.n(Y),k=t(5574),j=t.n(k),c=t(87462),E=t(15861),Z=t(67294),p=t(71577),q=t(18073),_=t(96842),ee=t(246),te=t(6171),ae=t(95639),a=t(85893),G=function(n){var o=n.onPageChange,d=n.onSelectedChange,l=n.selectedKeys,v=n.dataList,h=n.page,r=n.pageSize,m=n.total,L=n.loading,w=n.rowKey,b=n.columns;return(0,a.jsx)(ae.Z,{loading:L,size:"small",bordered:!0,columns:b||[],rowKey:w||"id",dataSource:v,rowSelection:{selectedRowKeys:l,onChange:d},pagination:{current:h,pageSize:r,total:m,onChange:o}})},O=void 0,ne=function(n){var o=n.leftTable,d=n.rightTable,l=n.handleOperation;return(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between"},children:[(0,a.jsx)("div",{style:{flex:1},children:(0,a.jsx)(G,(0,c.Z)({},o))}),(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:80},children:[(0,a.jsx)(p.ZP,{style:{margin:"10px 0px"},onClick:l.bind(O,"add"),type:"primary",children:(0,a.jsx)(q.Z,{})}),(0,a.jsx)(p.ZP,{style:{margin:"10px 0px"},onClick:l.bind(O,"allAdd"),type:"primary",children:(0,a.jsx)(_.Z,{})}),(0,a.jsx)(p.ZP,{style:{margin:"10px 0px"},onClick:l.bind(O,"allDelete"),type:"primary",children:(0,a.jsx)(ee.Z,{})}),(0,a.jsx)(p.ZP,{style:{margin:"10px 0px"},onClick:l.bind(O,"delete"),type:"primary",children:(0,a.jsx)(te.Z,{})})]}),(0,a.jsx)("div",{style:{flex:1},children:(0,a.jsx)(G,(0,c.Z)({},d))})]})},$=t(34077),re=function(n){var o=n.leftSearchConfig,d=n.rightSearchConfig,l=n.onSearch,v=n.onValuesChange;return(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between"},children:[(0,a.jsx)("div",{style:{flex:1},children:(0,a.jsx)($.default,(0,c.Z)({layout:"vertical",isSearch:!0,colProps:{span:12}},o,{onFinish:function(){return l("left")},onRest:function(){var r;(r=o.form)==null||r.resetFields()},onValuesChange:function(r,m){return v(r,m,"left")}}))}),(0,a.jsx)("div",{style:{width:80}}),(0,a.jsx)("div",{style:{flex:1},children:(0,a.jsx)($.default,(0,c.Z)({isSearch:!0,layout:"vertical",colProps:{span:12}},d,{onRest:function(){var r;(r=d.form)==null||r.resetFields()},onFinish:function(){return l("right")},onValuesChange:function(r,m){return v(r,m,"right")}}))})]})},H=t(11238),se=t(12444),le=t.n(se),ie=t(72004),oe=t.n(ie),fe=function(){function n(o,d){var l=this;le()(this,n),this.store={left:{search:{},selectedKeys:[],selectedRows:[],page:1,pageSize:20,total:0,dataList:[]},right:{search:{},selectedKeys:[],selectedRows:[],page:1,pageSize:20,total:0,dataList:[]}},this.forceUpdate=void 0,this.setValue=function(v,h){l.store=(0,c.Z)({},l.store,y()({},h,(0,c.Z)({},l.store[h],v))),l.forceUpdate&&l.forceUpdate()},d&&Object.keys(d||{}).length&&Object.entries(d).forEach(function(v){var h=j()(v,2),r=h[0],m=h[1];l.setValue(m,r)}),this.forceUpdate=o}return oe()(n,[{key:"stores",get:function(){return this.store}}]),n}(),ue=function(o,d){var l=o.Api,v=o.leftSearchConfig,h=o.rightSearchConfig,r=o.initValue,m=o.rowKey,L=o.columns,w=Z.useState({left:!1,right:!1}),b=j()(w,2),M=b[0],F=b[1],he=$.default.useForm(o.leftUseForm),de=j()(he,1),B=de[0],ge=$.default.useForm(o.rightUseForm),ve=j()(ge,1),J=ve[0],me=Z.useState(""),N=j()(me,2),Ze=N[0],Se=N[1],Q=function(){Se(new Date().getTime().toString())},i=Z.useMemo(function(){return new fe(Q,r)},[]),D=function(){var g=(0,E.Z)(U()().mark(function f(e){var u,R,V,K,T,C,z,x;return U()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(u=l[e],F(function(S){return(0,c.Z)({},S,y()({},e,!0))}),s.prev=2,R=u.url,V=u.options,K=u.before,T=u.after,C=K(i.stores.left,e),C!==!1){s.next=8;break}return F(function(S){return(0,c.Z)({},S,y()({},e,!1))}),s.abrupt("return");case 8:return s.next=10,(0,H.ZP)(R,(0,c.Z)({},V||{},{data:C})).catch(function(S){F(function(xe){return(0,c.Z)({},xe,y()({},e,!1))})});case 10:z=s.sent,x=T(z,e),x!==!1&&i.setValue(x,e),F(function(S){return(0,c.Z)({},S,y()({},e,!1))}),s.next=19;break;case 16:s.prev=16,s.t0=s.catch(2),F(function(S){return(0,c.Z)({},S,y()({},e,!1))});case 19:case"end":return s.stop()}},f,null,[[2,16]])}));return function(e){return g.apply(this,arguments)}}(),A=function(f,e,u){i.setValue({selectedKeys:f,selectedRows:e},u)},P=function(f,e,u){i.setValue({page:f,pageSize:e,selectedKeys:[],selectedRows:[]},u),D(u)},W=function(){var g=(0,E.Z)(U()().mark(function f(e){var u,R,V,K,T,C,z,x;return U()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(u=l[e],R=u.url,V=u.options,K=u.before,T=u.after,C=K(i.stores[e],e),C!==!1){s.next=5;break}return s.abrupt("return");case 5:return s.next=7,(0,H.ZP)(R,(0,c.Z)({},V||{},{data:C}));case 7:z=s.sent,x=T(z,e),x!==!1&&(P(1,i.stores.left.pageSize,"left"),P(1,i.stores.right.pageSize,"right"));case 10:case"end":return s.stop()}},f)}));return function(e){return g.apply(this,arguments)}}(),Ce=function(f,e,u){i.setValue({search:e},u)};return Z.useImperativeHandle(d,function(){return{handleOperation:W,onPageChange:P,onSelectedChange:A,onSearch:D,store:i,forceUpdate:Q,leftUseForm:B,rightUseForm:J}}),(0,a.jsxs)("div",{children:[(0,a.jsx)(re,{onValuesChange:Ce,leftSearchConfig:(0,c.Z)({},v||{},{initialValues:r&&r.left&&r.left.search||{},form:B}),rightSearchConfig:(0,c.Z)({},h||{},{initialValues:r&&r.right&&r.right.search||{},form:J}),onSearch:D}),(0,a.jsx)(ne,{handleOperation:W,leftTable:{rowKey:m,columns:L,page:i.stores.left.page,pageSize:i.stores.left.pageSize,total:i.stores.left.total,dataList:i.stores.left.dataList,selectedKeys:i.stores.left.selectedKeys,loading:M.left,onSelectedChange:function(f,e){return A(f,e,"left")},onPageChange:function(f,e){return P(f,e||10,"left")}},rightTable:{rowKey:m,columns:L,page:i.stores.right.page,pageSize:i.stores.right.pageSize,total:i.stores.right.total,dataList:i.stores.right.dataList,selectedKeys:i.stores.right.selectedKeys,loading:M.right,onSelectedChange:function(f,e){return A(f,e,"right")},onPageChange:function(f,e){return P(f,e||10,"right")}}})]})},ce=Z.forwardRef(ue)},24654:function(){}}]);
