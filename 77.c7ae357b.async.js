"use strict";(self.webpackChunkcarefree_antd_root=self.webpackChunkcarefree_antd_root||[]).push([[77],{34077:function(sr,be,a){a.r(be),a.d(be,{default:function(){return Mt}});var we=a(5574),j=a.n(we),s=a(87462),H=a(63366),u=a(67294),x=a(96108),Ke=a(71230),q=a(15746),He=u.createContext({}),Re=function(){return u.useContext(He)},Be=u.createContext({isFloat:!1,isSetHeight:!1,layout:"horizontal"}),Qe=function(){return u.useContext(Be)},Xe=a(11950),Ye=a(45520),C=function(){(0,Ye.default)(!1,"Can not find FormContext. Please make sure you wrap Field under Form.")},ie=u.createContext({getComponents:C,getStoreState:C,setInitialValues:C,updateValue:C,getItemStore:function(){return{init:C,register:C,getStoreState:C,updateValue:C,getValue:C}}}),ke=function(){return u.useContext(ie)},qe=a(12444),ae=a.n(qe),_e=a(72004),oe=a.n(_e),Ve=function(){function c(){var e=this;ae()(this,c),this.subForm={},this.subHide={},this.registerId=function(t,n,r){r&&(e.subForm[r]=t,e.subHide[r]=n)},this.removeId=function(t){t&&(delete e.subForm[t],delete e.subHide[t])}}return oe()(c,[{key:"subForms",get:function(){return this.subForm}},{key:"subHides",get:function(){return this.subHide}}]),c}(),$e=function(e){var t=u.useRef();return e?t.current=e:t.current=new Ve,[t.current]},Le=u.createContext(new Ve),Ee=function(){return u.useContext(Le)},Ne=function(e){var t=e.form,n=e.subscribe,r=e.name,o=e.hide;r&&n.registerId(t,o,r),u.useEffect(function(){return function(){return n.removeId(r)}},[])},et=function(e){return Array.isArray(e)?e:typeof e=="string"?e.split("_").filter(function(t){return t}):e},Ae=function(e){var t={};if(e){var n=e.getInternalHooks;t=n(Xe.ki)}var r=function(f,l){t.dispatch&&t.dispatch({type:"updateValue",namePath:et(f),value:l})},o=function(f){Object.entries(f).forEach(function(l){var m=j()(l,2),h=m[0],p=m[1];r(h,p)})};return(0,s.Z)({},t,{updateValue:r,bathUpdateValue:o})},Ue=function(e){return Ae(e)},We=function(e){var t=Re(),n=Ee(),r=ke(),o,d=Ue(t.itemRefHook);if(t){var f=t.watchList;o=f[(e||{}).id]}return u.useEffect(function(){if((t||{}).firstMont){var l=t.itemRefHook.getFieldsValue;typeof o=="function"&&o((e||{}).value,l(!0),(0,s.Z)({},d),r,{forms:n.subForms,hides:n.subHides})}},[JSON.stringify((e||{}).value)]),[d]},R=a(50568),tt=oe()(function c(){var e=this;ae()(this,c),this.store={},this.componentLists=[],this.init=function(t){var n=t.props||{},r=n.initialValue;if(r!==void 0){var o=t.getNamePath();o&&(e.store=(0,R.sO)(e.store,o,r))}},this.register=function(t){e.componentLists.push(t);var n=t.props||{},r=n.initialValue;return r!==void 0&&t.refresh(),function(){e.componentLists=e.componentLists.filter(function(d){return d!==t});var o=t.getNamePath();o&&(e.store=(0,R.sO)(e.store,o,void 0,!0))}},this.getStoreState=function(t){return t?(0,R.NA)(e.store,t):e.store},this.getComponents=function(){return e.componentLists},this.getStore=function(){return{getComponents:e.getComponents,getStoreState:e.getStoreState,getItemStore:e.getItemStore,setInitialValues:e.setInitialValues,updateValue:e.updateValue,bathUpdateValue:e.bathUpdateValue}},this.getItemStore=function(){return{init:e.init,register:e.register,getStoreState:e.getStoreState,updateValue:e.updateValue,getValue:e.getValue,bathUpdateValue:e.bathUpdateValue}},this.setInitialValues=function(t,n){n&&(e.store=(0,R.gg)({},t,e.store))},this.getPaths=function(t){return Array.isArray(t)?t:typeof t=="string"?t.split("_").filter(function(n){return n}):[]},this.bathUpdateValue=function(t){Object.entries(t).forEach(function(n){var r=j()(n,2),o=r[0],d=r[1],f=e.getPaths(o);e.store=(0,R.sO)(e.store,f,d)}),e.bathNotifyObservers(Object.keys(t))},this.updateValue=function(t,n){var r=e.getPaths(t);e.store=(0,R.sO)(e.store,r,n),e.notifyObservers(r)},this.getValue=function(t){var n=e.getPaths(t);return(0,R.NA)(e.store,n)},this.bathNotifyObservers=function(t){e.componentLists.forEach(function(n){var r=n.refresh,o=n.getNamePath,d=o();t.includes(d.join(""))&&r()})},this.notifyObservers=function(t){e.componentLists.forEach(function(n){var r=n.refresh,o=n.getNamePath,d=o();d.join("")===t.join("")&&r()})}}),rt=function(e){var t=u.useRef();if(!t.current)if(e)t.current=e;else{var n=new tt;t.current=n.getStore()}return[t.current]},Oe=rt,st=a(25098),nt=a.n(st),it=a(31996),at=a.n(it),ot=a(26037),lt=a.n(ot),i=a(85893),ut=function(c){at()(t,c);var e=lt()(t);function t(n){var r;if(ae()(this,t),r=e.call(this,n),r.mounted=!1,r.cancelRegisterFunc=function(){},r.getNamePath=function(){var l=r.props,m=l.name,h=l.formName;return Array.isArray(m)?h&&[h].concat(m)||m:h&&[h,m]||[m]},r.refresh=function(){r.mounted&&r.forceUpdate()},r.getValue=function(){var l=r.props.hideContent,m=l.getItemStore(),h=m.getValue;return h(r.getNamePath())},n.hideContent){var o=n.hideContent,d=o.getItemStore(),f=d.init;f(nt()(r))}return r}return oe()(t,[{key:"componentDidMount",value:function(){var r=this.props.hideContent;if(r){var o=r.getItemStore(),d=o.register;this.cancelRegisterFunc=d(this)}this.mounted=!0}},{key:"componentWillUnmount",value:function(){this.cancelRegisterFunc(),this.mounted=!1}},{key:"render",value:function(){var r=this.props.children;return this.getValue()?(0,i.jsx)(u.Fragment,{}):(0,i.jsx)(u.Fragment,{children:r})}}]),t}(u.Component),Te=function(c){var e=u.useContext(ie);return(0,i.jsx)(ut,(0,s.Z)({},c,{hideContent:e}))},le=a(22174),Me=a(69677),ct=a(17376),dt=a(49288),ht=a(69606),vt=a(34913),ft=a(71338),mt=a(59847),gt=a(34041),yt=a(32808),St=a(11330),Zt=a(55742),Ft=a(72269),Pt=a(68351),xt=a(23799),pt=a(48115),Ct=a(80882),ze=a(71577),It=["children","style"],jt=["children","colProps"],De=function(e){var t=e.children,n=e.style,r=(0,H.Z)(e,It),o=Qe(),d=o.isFloat,f=o.isSetHeight,l=o.layout,m={};return d&&(m={float:"left",width:"100%",overflow:"hidden"},f&&(m.height=l==="inline"?54:74)),(0,i.jsx)(q.Z,(0,s.Z)({span:6},r,{style:(0,s.Z)({},m,n||{}),children:t}))},bt=function(e){var t=e.children,n=e.colProps,r=n===void 0?{}:n,o=(0,H.Z)(e,jt);return(0,i.jsx)(De,(0,s.Z)({},r||{},{children:(0,i.jsx)(Je.Item,(0,s.Z)({},o,{children:t}))}))},Ge=bt,Ht=["children"],Rt=["children"],Bt=["children"],Vt=["style","watch","shouldUpdate","dependencies"],nr=le.Z.RangePicker,$t=function(e,t){return Array.isArray(e)?t&&[t].concat(e).join("_")||e.join("_"):t&&t+"_"+e||e},ue=function(e){var t=e||{},n=t.children,r=(0,H.Z)(t,Ht),o=We(e),d=j()(o,1),f=d[0];return typeof n=="function"?n((0,s.Z)({},r,{childProps:f})):u.isValidElement(n)?u.cloneElement(n,(0,s.Z)({},r)):n},Lt=function(e){var t=e.children,n=(0,H.Z)(e,Rt);return(0,i.jsx)(x.Z.Item,(0,s.Z)({},n,{children:(0,i.jsx)(ue,{children:t})}))},Et=function(e){var t=e.children,n=(0,H.Z)(e,Bt);return(0,i.jsx)(Ge,(0,s.Z)({},n,{children:(0,i.jsx)(ue,{children:t})}))},M=function(e,t){var n=t.colProps,r=n===void 0?{}:n,o=t.itemStyle,d=o===void 0?{}:o,f=t.attrStyle,l=f===void 0?{}:f,m=t.attrProps,h=m===void 0?{}:m,p=t.watchList,B=t.name,N=t.layout,z=t.isFloat,V=t.isSetHeight;return e.map(function(F,I){var g=F.type,P=F.label,b=F.name,D=F.itemAttr,y=F.attr,_=F.rules,ce=F.render,ee=F.isItemList,de=F.isHide,G=F.colProps,A=G===void 0?{}:G,U={};z&&(U={float:"left",width:"100%",overflow:"hidden"},V&&(U.height=N==="inline"?54:74));var $=D||{},te=$.style,re=te===void 0?{}:te,W=$.watch,J=W===void 0?!0:W,L=$.shouldUpdate,w=$.dependencies,K=(0,H.Z)($,Vt),he=y||{},Q=he.style,S=Q===void 0?{}:Q,v=void 0;if(g==="Input"){var ve=y,se=h;v=(0,i.jsx)(Me.Z,(0,s.Z)({placeholder:"\u8BF7\u8F93\u5165"+P},se,ve,{style:(0,s.Z)({},l,S)}))}else if(g==="TextArea"){var fe=y,me=h;v=(0,i.jsx)(Me.Z.TextArea,(0,s.Z)({placeholder:"\u8BF7\u8F93\u5165"+P},me,fe,{style:(0,s.Z)({},l,S)}))}else if(g==="InputNumber"){var ge=y,ye=h;v=(0,i.jsx)(ct.Z,(0,s.Z)({placeholder:"\u8BF7\u8F93\u5165"+P},ye,ge,{style:(0,s.Z)({width:"100%"},l,S)}))}else if(g==="AutoComplete"){var Se=y,Ze=h;v=(0,i.jsx)(dt.Z,(0,s.Z)({placeholder:"\u8BF7\u9009\u62E9"+P},Ze,Se,{style:(0,s.Z)({},l,S)}))}else if(g==="Cascader"){var X=y,Fe=h;v=(0,i.jsx)(ht.Z,(0,s.Z)({placeholder:"\u8BF7\u9009\u62E9"+P},Fe,X,{style:(0,s.Z)({},l,S)}))}else if(g==="DatePicker"){var Pe=y,Y=h;v=(0,i.jsx)(le.Z,(0,s.Z)({placeholder:"\u8BF7\u9009\u62E9"+P},Y,Pe,{style:(0,s.Z)({width:"100%"},l,S)}))}else if(g==="Rate"){var xe=y,pe=h;v=(0,i.jsx)(vt.Z,(0,s.Z)({},pe,xe,{style:(0,s.Z)({},l,S)}))}else if(g==="Slider"){var Ce=y,O=h;v=(0,i.jsx)(ft.Z,(0,s.Z)({},O,Ce,{style:(0,s.Z)({},l,S)}))}else if(g==="TreeSelect"){var E=y,k=h;v=(0,i.jsx)(mt.Z,(0,s.Z)({placeholder:"\u8BF7\u9009\u62E9"+P},k,E,{style:(0,s.Z)({},l,S)}))}else if(g==="Select"){var T=y,Ie=h;v=(0,i.jsx)(gt.Z,(0,s.Z)({placeholder:"\u8BF7\u9009\u62E9"+P},Ie,T,{style:(0,s.Z)({},l,S)}))}else if(g==="Checkbox"){var je=y,zt=h;v=(0,i.jsx)(yt.Z.Group,(0,s.Z)({},zt,je,{style:(0,s.Z)({},l,S)}))}else if(g==="Mentions"){var Dt=y,Gt=h;v=(0,i.jsx)(St.Z,(0,s.Z)({placeholder:"\u8BF7\u8F93\u5165"+P},Gt,Dt,{style:(0,s.Z)({},l,S)}))}else if(g==="Radio"){var Jt=y,wt=h;v=(0,i.jsx)(Zt.ZP.Group,(0,s.Z)({},wt,Jt,{style:(0,s.Z)({},l,S)}))}else if(g==="Switch"){var Kt=y,Qt=h;v=(0,i.jsx)(Ft.Z,(0,s.Z)({},Qt,Kt,{style:(0,s.Z)({},l,S)}))}else if(g==="TimePicker"){var Xt=y,Yt=h;v=(0,i.jsx)(Pt.Z,(0,s.Z)({placeholder:"\u8BF7\u9009\u62E9"+P},Yt,Xt,{style:(0,s.Z)({width:"100%"},l,S)}))}else if(g==="Upload"){var kt=y,qt=h;v=(0,i.jsx)(xt.Z,(0,s.Z)({},qt,kt,{style:(0,s.Z)({},l,S)}))}else if(g==="RangePicker"){var _t=y,er=h;v=(0,i.jsx)(le.Z.RangePicker,(0,s.Z)({},er,_t,{style:(0,s.Z)({width:"100%"},l,S)}))}else g==="Custom"&&(v=ce);if(ee){var tr=v,rr=b;return(0,i.jsx)(q.Z,(0,s.Z)({span:6},r||{},A||{},{style:(0,s.Z)({},U,{height:"auto",overflow:"auto"},(r||{}).style||{},(A||{}).style||{}),children:(0,i.jsx)(x.Z.List,(0,s.Z)({},D,{name:rr,children:tr}),I)}),I)}p&&Object.keys(p).length&&J&&p[$t(b,B)]&&(v=(0,i.jsx)(ue,{children:v},I));var ne={};return L?ne.shouldUpdate=L:!L&&w?ne.dependencies=w:!L&&!w&&typeof v=="function"&&(ne.dependencies=[b]),v=(0,i.jsx)(q.Z,(0,s.Z)({span:6},r||{},A||{},{style:(0,s.Z)({},U,(r||{}).style||{},(A||{}).style||{}),children:(0,i.jsx)(x.Z.Item,(0,s.Z)({},ne,K,{name:b,label:P,rules:_,style:(0,s.Z)({marginBottom:8},d,re),children:v}))}),I),de&&b?(0,i.jsx)(Te,{name:b,formName:B,children:v},I):v})},Nt=function(e){var t=e.onRest,n=e.setExpand,r=e.expand,o=e.displayPre,d=e.searchBtnItem,f=d===void 0?{}:d,l=e.searchBtnProps,m=l===void 0?{}:l,h=e.searchBtnRestProps,p=h===void 0?{}:h,B=e.itemStyle,N=B===void 0?{}:B,z=f||{},V=z.style,F=V===void 0?{}:V;return(0,i.jsxs)(x.Z.Item,(0,s.Z)({label:" "},f,{style:(0,s.Z)({marginBottom:8},N,F),children:[(0,i.jsx)(ze.ZP,(0,s.Z)({type:"primary",htmlType:"submit"},m,{children:"\u67E5\u8BE2"})),(0,i.jsx)(ze.ZP,(0,s.Z)({style:{margin:"0 8px"},onClick:t},p,{children:"\u91CD\u7F6E"})),!!o&&(0,i.jsx)("a",{style:{fontSize:12},onClick:function(){return n(!r)},children:r?(0,i.jsx)(u.Fragment,{children:(0,i.jsx)(pt.Z,{})}):(0,i.jsx)(u.Fragment,{children:(0,i.jsx)(Ct.Z,{})})})]}))},At=a(94184),Ut=a.n(At),Wt=["config","isSearch","displayPre","searchBtnItem","searchBtnProps","searchBtnRestProps","onRest","rowProps","colProps","children","className","itemStyle","attrStyle","attrProps","watchList","formHide","initialHide","form","subscribe","layout","isFloat","isSetHeight"],Ot=function(e,t){var n=e.config,r=n===void 0?[]:n,o=e.isSearch,d=e.displayPre,f=e.searchBtnItem,l=f===void 0?{}:f,m=e.searchBtnProps,h=m===void 0?{}:m,p=e.searchBtnRestProps,B=p===void 0?{}:p,N=e.onRest,z=N===void 0?function(){}:N,V=e.rowProps,F=V===void 0?{}:V,I=e.colProps,g=I===void 0?{}:I,P=e.children,b=e.className,D=e.itemStyle,y=D===void 0?{}:D,_=e.attrStyle,ce=_===void 0?{}:_,ee=e.attrProps,de=ee===void 0?{}:ee,G=e.watchList,A=e.formHide,U=e.initialHide,$=e.form,te=e.subscribe,re=e.layout,W=re===void 0?"horizontal":re,J=e.isFloat,L=e.isSetHeight,w=(0,H.Z)(e,Wt),K=u.useRef(),he=(0,u.useState)(!1),Q=j()(he,2),S=Q[0],v=Q[1],ve=(0,u.useState)(!1),se=j()(ve,2),fe=se[0],me=se[1],ge=function(){var E={colProps:g,itemStyle:y,attrStyle:ce,attrProps:de,watchList:G,name:e.name,layout:W,isFloat:J,isSetHeight:L};if(o&&d&&!S){if(d>r.length){var k=d-r.length,T=u.Children.toArray(P);if(k>T.length)return(0,i.jsxs)(u.Fragment,{children:[M(r,E),T]});if(k<=T.length){var Ie=T.slice(0,k);return(0,i.jsxs)(u.Fragment,{children:[M(r,E),Ie]})}return M(r,E)}var je=r.slice(0,d);return M(je,E)}return(0,i.jsxs)(u.Fragment,{children:[M(r,E),P]})},ye=Ut()("carefree-form",b);u.useEffect(function(){var O;return clearTimeout(O),O=setTimeout(function(){me(!0)},300),function(){return clearTimeout(O)}},[]);var Se=x.Z.useForm($),Ze=j()(Se,1),X=Ze[0],Fe=Oe(A),Pe=j()(Fe,1),Y=Pe[0];u.useMemo(function(){return Y.setInitialValues(U||{},!0)},[]);var xe=$e(te),pe=j()(xe,1),Ce=pe[0];return Ne({name:e.name,form:X,subscribe:Ce,hide:Y}),u.useImperativeHandle(t,function(){return K.current}),(0,i.jsx)(Be.Provider,{value:{isFloat:J,isSetHeight:L,layout:W},children:(0,i.jsx)(ie.Provider,{value:Y,children:(0,i.jsx)(He.Provider,{value:{firstMont:fe,watchList:G||{},form:X,itemRefHook:K.current},children:(0,i.jsx)(x.Z,(0,s.Z)({},w,{form:X,layout:W,className:ye,ref:K,children:(0,i.jsxs)(Ke.Z,(0,s.Z)({gutter:24},F,{style:(0,s.Z)({},J?{display:"block",height:"auto",overflow:"hidden"}:{},(F||{}).style||{}),children:[ge(),o&&(0,i.jsx)(q.Z,(0,s.Z)({span:6},g,{style:(0,s.Z)({float:"left",width:"100%",overflow:"hidden"},(g||{}).style||{}),children:(0,i.jsx)(Nt,{onRest:z,expand:S,setExpand:v,displayPre:d,searchBtnItem:l,searchBtnProps:h,searchBtnRestProps:B,itemStyle:y})}))]}))}))})})})},Tt=u.forwardRef(Ot),Z=Tt;Z.useForm=x.Z.useForm,Z.Item=x.Z.Item,Z.ColItem=Ge,Z.ColWatchItem=Et,Z.Cols=De,Z.List=x.Z.List,Z.Provider=x.Z.Provider,Z.ItemWatch=Lt,Z.useFormContext=Re,Z.useFormWatchList=We,Z.useChildItemFun=Ue,Z.getChildItemFun=Ae,Z.useFormItemHide=Oe,Z.HideItem=Te,Z.useSubscribe=$e,Z.FormSubscribeProvider=Le,Z.useFormSubscribeProvider=Ee,Z.useSubscribeReginsterId=Ne;var Je=Z,Mt=Je}}]);
